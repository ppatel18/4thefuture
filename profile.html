<!DOCTYPE html>
<html>
    
    <head>
        <link rel="stylesheet" ref="css/style.css"/>
        <link rel="stylesheet" ref="css/media.css"/>
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="bootstrap/js/bootstrap.min.js" rel="stylesheet">
        <link href="jquery-3.2.1.js" rel="stylesheet">

    <style>
        img {
            height: 100px;
            float: left;
        }
    </style>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    </head>
    
    <body >
        <h1> Hi </h1>
        <div id="listdata"></div>
        <form>
          <div><input type="text" name="name" value="a" id="name"></div>
          <div><input type="text" name="uid" value="uid" id="uid"></div>
          <div><input type="text" name="age" value="age" id="age"></div>
          <div><input type="text" name="country" value="ab" id="country"></div>
            <div>
                <input type="radio" name="sex" value="male" checked> Male<br>
                <input type="radio" name="sex" value="female"> Female<br>
                <input type="radio" name="sex" value="other"> Other <br>
            </div>
            <div><input type="text" name="address" value="Address" id="c"></div>
            <input type="checkbox" name="isStudent" value="true"> Student<br>
            <input type="checkbox" name="isInstructor" value="true" checked> Mentor<br>
            <div>
            <textarea name="Skills" value= "Skills" rows="8" cols="40">Skills</textarea>
          </div>



          <div>
            <input type="submit" name="g" value="Submit" id="g">
          </div>
        </form>
        <div id ="content"></div>
        <div id ="result">result posted</div>
        JSON.parse(JSON.stringify(jQuery('#frm').serializeArray()))
        <script>
            var jsonData;
            var result =[];
            $( "form" ).submit(function( event ) {
                // Stop form from submitting normally
                event.preventDefault();
              //jsonData = ($( this ).serializeArray());
              //console.log("this is jsondata",jsonData);

                var dataArray = $(this).serializeArray(),
                    dataObj = {};

                $(dataArray).each(function(i, field){
                    dataObj[field.name] = field.value;
                });

                console.log("dataobj");
                console.log(JSON.stringify(dataObj));
                var finalresult = (JSON.stringify(dataObj));

                // Get some values from elements on the page:
                //var $form = $( this ),
                //    term = $form.find( "input[name='s']" ).val(),
                //    url = $form.attr( "action" );

                // Send the data using post
                    var posting = $.post( "http://34.209.38.109:8080/location/ms/rest/post" ,jsonData  );

                // Put the results in a div
                //     posting.done(function( data ) {
                //   var content = $( data ).find( "#content" );
                //   $( "#result" ).empty().append( content );
                //});
                $.ajax({
                    url: "http://localhost:8079/students/add/",
                    type: "POST",
                    crossDomain: true,
                    data: finalresult,
                    xhrFields: {
                        withCredentials: true
                    },
                    dataType: "json",
                    success: function (response) {
                        var resp = JSON.parse(response)
                        alert(resp.status);
                    },
                    error: function (xhr, status) {
                        alert("error");
                    }
                });

                (function() {
                    var ourdataAPI = "http://34.209.38.109:8080/location/ms/rest/get/uid1";
                    $.getJSON( ourdataAPI, {

                        format: "json"
                    })
                        .done(function( data ) {
                            console.log(data);
                            $.each( data.items, function( i, item ) {
                                $( "<div>" ).attr( "src", item ).appendTo( "#content" );
                                if ( i < 0 ) {
                                    return false;
                                }
                            });
                        });
                })();

                (function() {
                    var ourAPI = "http://34.209.38.109:8080/location/ms/rest/getCourse/cs1";
                    $.getJSON( ourAPI, {

                        format: "json"
                    })
                        .done(function( data ) {
                            console.log(data);
                            $.each( data.items, function( i, item ) {
                                $( "<div>" ).attr( "src", item ).appendTo( "#content" );
                                if ( i < 0 ) {
                                    return false;
                                }
                            });
                        });
                })();

            });






        </script>
    </body>
    
</html>